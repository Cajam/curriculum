<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Unit Testing with RSpec | Summary</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.2.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
    

        
    
    
    <link rel="next" href="../../05-mvc-with-rails/MVC-intro-to-rails/readme.html" />
    
    
    <link rel="prev" href="../../05-mvc-with-rails/readme.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="5.1" data-basepath="../.." data-revision="Wed Jul 29 2015 16:31:21 GMT+0000 (UTC)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        An Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="01-front-end-fundamentals/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Front End Fundamentals
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="01-front-end-fundamentals/command-line/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/command-line/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Command Line Interface
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="01-front-end-fundamentals/git/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/git/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Git
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="01-front-end-fundamentals/intro-to-web-and-html/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/intro-to-web-and-html/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Intro to Web and HTML
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="01-front-end-fundamentals/css/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/css/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        CSS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="01-front-end-fundamentals/javascript-data-types/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/javascript-data-types/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        JavaScript Data Types
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="01-front-end-fundamentals/javascript-loops-conditionals/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/javascript-loops-conditionals/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                        JavaScript Loops &amp; Conditionals
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="01-front-end-fundamentals/javascript-objects-DOM/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/javascript-objects-DOM/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        JavaScript Objects and DOM
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="01-front-end-fundamentals/morning-exercises.html">
            
                
                    <a href="../../01-front-end-fundamentals/morning-exercises.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                        Morning Exercises
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="02-intermediate-front-end/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Intermediate Front End
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="02-intermediate-front-end/scope-context-closures/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Scope, Context, and Closures
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="02-intermediate-front-end/scope-context-closures/scope.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/scope.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        Scope
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="02-intermediate-front-end/scope-context-closures/context.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/context.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.2.</b>
                        
                        Context
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="02-intermediate-front-end/scope-context-closures/closures.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/closures.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.</b>
                        
                        Closures
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="02-intermediate-front-end/events-and-callbacks/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/events-and-callbacks/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Events and Callbacks
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="02-intermediate-front-end/git_branching/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/git_branching/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Git Branching
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="02-intermediate-front-end/jquery/jquery-intro-selectors.html">
            
                
                    <a href="../../02-intermediate-front-end/jquery/jquery-intro-selectors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        jQuery
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="02-intermediate-front-end/jquery/jquery-two.html">
            
                
                    <a href="../../02-intermediate-front-end/jquery/jquery-two.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        jQuery 2
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="02-intermediate-front-end/workflows/lesson_plan.html">
            
                
                    <a href="../../02-intermediate-front-end/workflows/lesson_plan.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                        Workflows
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="02-intermediate-front-end/css2/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/css2/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                        CSS 2 (Layout &amp; Fonts)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="02-intermediate-front-end/homework.html">
            
                
                    <a href="../../02-intermediate-front-end/homework.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.8.</b>
                        
                        Homework Assignments
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" >
            
                
                    <a target="_blank" href="https:/github.com/ga-dc/pbj-project1/blob/master/readme.md">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Project 1
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="04-ruby-mvc-sinatra/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Ruby + MVC with Sinatra
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="04-ruby-mvc-sinatra/ruby-basics/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/ruby-basics/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Ruby Basics
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="04-ruby-mvc-sinatra/ruby-enumerables/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/ruby-enumerables/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Ruby Enumerables
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="04-ruby-mvc-sinatra/problem_modeling/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/problem_modeling/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Problem Modeling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="04-ruby-mvc-sinatra/domain_modeling/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/domain_modeling/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Domain Modeling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="04-ruby-mvc-sinatra/databases/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/databases/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Databases
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="04-ruby-mvc-sinatra/active-record-intro/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/active-record-intro/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        Active Record
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="04-ruby-mvc-sinatra/sinatra-rest/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/sinatra-rest/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                        Sinatra &amp; REST
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="04-ruby-mvc-sinatra/sinatra-and-activerecord/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/sinatra-and-activerecord/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                        Sinatra &amp; Active Record
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="05-mvc-with-rails/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        MVC with Rails
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="5.1" data-path="05-mvc-with-rails/unit_testing_with_rspec/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/unit_testing_with_rspec/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Unit Testing with RSpec
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="05-mvc-with-rails/MVC-intro-to-rails/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/MVC-intro-to-rails/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        MVC Intro to Rails
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="05-mvc-with-rails/rails-models-and-migrations/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-models-and-migrations/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Models and Migrations
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="05-mvc-with-rails/rails-views-and-controllers/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-views-and-controllers/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Views and Controllers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="05-mvc-with-rails/rails-routes-and-resources/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-routes-and-resources/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                        Routes and Resources
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="05-mvc-with-rails/rails-helpers/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-helpers/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.</b>
                        
                        Helpers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="05-mvc-with-rails/rails-sessions-and-auth/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-sessions-and-auth/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.</b>
                        
                        Sessions and Auth
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="05-mvc-with-rails/rails-deployment/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-deployment/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.8.</b>
                        
                        Deployment
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" >
            
                
                    <a target="_blank" href="https:/github.com/ga-dc/pbj-project2/blob/master/readme.md">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Project 2
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="07-apis-with-rails-and-express/readme.html">
            
                
                    <a href="../../07-apis-with-rails-and-express/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        APIs with Rails and Express
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="08-users-and-authentication-in-apis/readme.html">
            
                
                    <a href="../../08-users-and-authentication-in-apis/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Users and Authentication in APIs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" >
            
                
                    <a target="_blank" href="https:/github.com/ga-dc/pbj-project3/blob/master/readme.md">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Project 3
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="10-mvw-with-backbone/readme.html">
            
                
                    <a href="../../10-mvw-with-backbone/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        MV* with Backbone
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="11-mvw-with-angular/readme.html">
            
                
                    <a href="../../11-mvw-with-angular/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        MV* with Angular
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="12" >
            
                
                    <a target="_blank" href="https:/github.com/ga-dc/pbj-project4/blob/master/readme.md">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        Portfolio Project
                    </a>
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >Summary</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="unit-testing-with-rspec">Unit Testing with RSpec</h1>
<ul>
<li>Explain the purpose unit testing</li>
<li>Explain what role RSpec plays in testing</li>
<li>Explain the TDD/BDD Mantra</li>
<li>Describe RSpec&apos;s basic syntax</li>
<li>Define the role of expectations and matchers</li>
<li>Explain why isolating tests is a best practice</li>
<li>List common expectations and the scenarios they support</li>
<li>Differentiate between testing return values and side effects</li>
<li>Describe why we avoid testing internal implementation</li>
</ul>
<hr>
<h2 id="what-is-rspec">What is RSpec?</h2>
<ul>
<li>RSpec is a testing framework for the Ruby programming language.  It&apos;s a Domain Specific Language for writing live specifications about your code.</li>
<li>Released on May 18, 2007</li>
</ul>
<p>These are specifications about YOUR code that you can run to ensure your code is doing what it should.  Think back to the way you code.  You create a part of a web page, then you browse to that page to test it.  To ensure that it is doing as you expect.  Then you add another feature.  And test bot features.  Then you add a third feature and test... just the third feature.  Imagine if you had a battery of automated specs, which run against your code, so you can see if your new changes fit your new requirements and EVERY requirement that came before this.</p>
<p>The reading discussed TDD/BDD.  Indicating that testing is as much about design, helping you to architect a maintainable application, as it is about creating a body of regression tests.  In this lesson, we are focusing on the safety net.  Design is hard, BDD makes it easier, but need the basic skills first.</p>
<hr>
<h2 id="let-s-look-at-a-rspec-person-example-https-github-com-ga-dc-rspec-person-example">Let&apos;s look at a <a href="https://github.com/ga-dc/rspec_person_example" target="_blank">rspec_person_example</a></h2>
<p>When I run <code>rspec</code> in the <code>rspec_person_example</code> dir, what do we see?</p>
<pre><code>Person
  Constructor
    should create a new instance of class Person
    should have a name
    should default #language to &apos;English&apos;
  #greeting
    for default language (English)
      should offer a greeting in English
    when language is &apos;Italian&apos;
      should offer a greeting in Italian

Finished in 0.00565 seconds (files took 0.14281 seconds to load)
5 examples, 0 failures
</code></pre><p>This tells me quite a bit about a Person.  I see that Person should have a Constructor that accepts name and (possibly) language.  From the constructor, I see the Person might support many languages, starting with English.  Then, I see that a Person can greet in English or Italian.</p>
<p>Let&apos;s review <code>spec/person_spec.rb</code>.  This is the specification for a Person.  It indicates how we can expect a Person to function.  We can trust it to act in this manner.  Here, we see what some examples of how to initialize a Person.</p>
<pre><code>rspec_person_example/
&#x251C;&#x2500;&#x2500; models
&#x2502;   &#x2514;&#x2500;&#x2500; person.rb
&#x2514;&#x2500;&#x2500; spec
    &#x251C;&#x2500;&#x2500; person_spec.rb
    &#x2514;&#x2500;&#x2500; spec_helper.rb

2 directories, 3 files
</code></pre><p>We have a Person model and a Person spec (a specification or test). This is the typical RSpec convention.  Specs live under the spec directory and echo the models in our system with the <code>_spec</code> suffix.</p>
<hr>
<h2 id="what-does-an-rspec-specification-or-test-look-like">What does an RSpec specification (or &quot;test&quot;) look like?</h2>
<pre><code class="lang-ruby">require_relative <span class="hljs-string">&apos;../models/person&apos;</span>  <span class="hljs-comment"># a reference to our code</span>

describe <span class="hljs-constant">Person</span> <span class="hljs-keyword">do</span>
  describe <span class="hljs-string">&quot;Constructor&quot;</span> <span class="hljs-keyword">do</span>
    before(<span class="hljs-symbol">:each</span>) <span class="hljs-keyword">do</span>
      <span class="hljs-variable">@matt</span> = <span class="hljs-constant">Person</span>.new(<span class="hljs-string">&quot;Matt&quot;</span>)
    <span class="hljs-keyword">end</span>

    it <span class="hljs-string">&quot;should create a new instance of class Person&quot;</span> <span class="hljs-keyword">do</span>
      expect(<span class="hljs-variable">@matt</span>).to be_an_instance_of(<span class="hljs-constant">Person</span>)
    <span class="hljs-keyword">end</span>

    it <span class="hljs-string">&quot;should have a name&quot;</span> <span class="hljs-keyword">do</span>
      expect(<span class="hljs-variable">@matt</span>.name).to_not be_nil
    <span class="hljs-keyword">end</span>

    it <span class="hljs-string">&quot;should default #language to &apos;English&apos;&quot;</span> <span class="hljs-keyword">do</span>
      expect(<span class="hljs-variable">@matt</span>.language).to eq(<span class="hljs-string">&quot;English&quot;</span>)
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

  describe <span class="hljs-string">&quot;#greeting&quot;</span> <span class="hljs-keyword">do</span>
    context <span class="hljs-string">&quot;for default language (English)&quot;</span> <span class="hljs-keyword">do</span>
      subject(<span class="hljs-symbol">:bob</span>) { <span class="hljs-constant">Person</span>.new(<span class="hljs-string">&quot;Bob&quot;</span>) }

      it <span class="hljs-string">&quot;should offer a greeting in English&quot;</span> <span class="hljs-keyword">do</span>
        expect(bob.greeting).to eql(<span class="hljs-string">&quot;Hello, my name is Bob.&quot;</span>)
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>

    context <span class="hljs-string">&quot;when language is &apos;Italian&apos;&quot;</span> <span class="hljs-keyword">do</span>
      subject(<span class="hljs-symbol">:tony</span>) { <span class="hljs-constant">Person</span>.new(<span class="hljs-string">&quot;Tony&quot;</span>, <span class="hljs-string">&quot;Italian&quot;</span>) }

      it <span class="hljs-string">&quot;should offer a greeting in Italian&quot;</span> <span class="hljs-keyword">do</span>
        <span class="hljs-comment"># legacy syntax - the old DSL</span>
        tony.greeting.should eql(<span class="hljs-string">&quot;Ciao, mi chiamo Tony.&quot;</span>)
        <span class="hljs-comment"># equivalent to:</span>
        <span class="hljs-comment"># expect(tony.greeting).to eql(&quot;Ciao, mi chiamo Tony.&quot;)</span>
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h3 id="the-spec">The Spec</h3>
<p>The first line is a reference to our library code.  We need to access to the classes we have written.</p>
<p>Well skim through the code, gaining a high level knowledge of what is expected, then we&apos;ll return to hash out the details.</p>
<p><code>describe</code> is a new keyword provided by RSpec (part of its DSL).  Here it indicates that a <code>Person</code> is the &quot;Unit Under Test&quot;.  First we show examples of what we can expect as we contruct new people.  Then, we describe the functionality of the <code>greeting</code> method, specifically within the specific context of each language.  This is ruby code, indicating how our library (or model) code should behave.</p>
<h3 id="test-isolation">Test Isolation</h3>
<p>Returning to the top, we see <code>@matt</code> being instantiated.
  Introduce isolation.</p>
<ol>
<li>Setup</li>
<li>Test</li>
<li>Teardown</li>
</ol>
<h3 id="expectation-and-matcher">Expectation and Matcher</h3>
<p>Then we see our first spec or &quot;expectation&quot;.</p>
<pre><code>expect(@matt).to be_an_instance_of(Person)
</code></pre><p>RSpec assertions have two components: expectation and matcher.</p>
<p>We expect <code>@matt</code> to be something.  We identify that &quot;something&quot; with a Matcher:</p>
<blockquote>
<p>Expectation: <code>expect(@matt).to</code></p>
<p>Matcher: <code>be_an_instance_of(Person)</code></p>
</blockquote>
<p>Everything else exists to support Expectations and Matchers.</p>
<h3 id="legacy-syntax-should">Legacy syntax (should)</h3>
<p>In addition to <code>expect(iut).to matcher</code>, RSpec supports another syntax: <code>should</code>.   That expectation is slightly different.  It uses the older <code>should</code> syntax.  </p>
<p>You may see this:</p>
<pre><code>it &quot;should default #language to &apos;English&apos;&quot; do
  expect(@matt.language).to eq(&quot;English&quot;)
end
</code></pre><p>Written as:</p>
<pre><code>it &quot;should default #language to &apos;English&apos;&quot; do
  @matt.language.should eq(&quot;English&quot;)
end
</code></pre><p>The underlying implementation of &quot;should&quot; was &quot;messy&quot;. You can see that they had to dynamically adjust our library code <code>@matt.language</code> to support the <code>should</code> method.</p>
<p>The new syntax works like jQuery&apos;s <code>$()</code> syntax.  We use <code>expect(IUT)</code> to &quot;wrap&quot; the Item Under Test, so that it supports the <code>to</code> method.  The <code>to</code> method accepts a matcher.</p>
<p>While we adjust the use of parenthesis for readability, we are really passing the &quot;matcher&quot; to the &quot;expectation&quot;.</p>
<h3 id="exercise-getting-familiar">Exercise: Getting familiar</h3>
<p>We are going to use a website called LearnRuby to practice reading specifications.</p>
<p>Follow these instructions carefully, if you think you are lost, re-read the instructions, I expect you missed a step.  Due to Learn Ruby&apos;s setup, you will use <code>rake</code> instead of <code>rspec</code>.  The rake task is configuring and running rspec.</p>
<p>These exercises increase in complexity.  They will exercise your ruby knowledge and your RSpec knowledge at the same time.  If you ever find yourself getting ahead, feel free to do any of these exercises.    Conversely, if you feel a little lost, back up.  Do some of the exercises we skipped.</p>
<p>Let&apos;s start at the very beginning.  What a very fine place to start.</p>
<p><a href="http://testfirst.org/learn_ruby#install" target="_blank">http://testfirst.org/learn_ruby#install</a></p>
<ol>
<li>Start from <code>wdi/exercises</code>.</li>
<li><code>git clone git://github.com/alexch/learn_ruby.git</code></li>
<li>Learn Ruby expects a particular version of RSpec.<pre><code>gem install rspec --version &apos;&lt; 3.0&apos;
</code></pre></li>
<li>LearnRuby uses the legacy &quot;should &quot; syntax. To avoid deprecation warnings, let&apos;s configure rspec to allow this syntax. Make sure your &quot;rspec_config.rb&quot; file looks like this:<pre><code class="lang-ruby"><span class="hljs-comment"># rspec_config.rb</span>
<span class="hljs-constant">RSpec</span>.configure <span class="hljs-keyword">do</span> |c|
c.fail_fast = <span class="hljs-keyword">true</span>
c.color = <span class="hljs-keyword">true</span>
c.expect_with(<span class="hljs-symbol">:rspec</span>) { |with| with.syntax = <span class="hljs-symbol">:should</span> }
<span class="hljs-keyword">end</span>
</code></pre>
</li>
<li>Once you get the materials, open learn_ruby/index.html in your favorite web browser. Further instructions await therein.</li>
</ol>
<p>We&apos;ll continue together through the first few steps.</p>
<p>Continue with 00_hello.  We&apos;ll do this for 8 minutes.</p>
<h3 id="context">Context</h3>
<p>As we move into the the description of the <code>greeting</code> method, we see our first &quot;context&quot;: <code>&quot;for default language (English)&quot;</code>.  Within this block, we expect the language of our person to be &quot;English&quot; and we will write specs accordingly.  You can see this as we move down through each supported language.</p>
<p>Where did <code>@matt</code> come from? <code>before(:each)</code>  How about <code>bob</code> and <code>tony</code>?</p>
<p><code>subject</code> is another part of the RSpec DSL.  We found that the subject of each test was an important componenet, so we made it a first class citizen.  While we still setup some things in <code>before</code> blocks, you will usually see the item &quot;under test&quot; defined in a <code>subject</code> block.</p>
<p>The following subject block indicates that there will be a variable named <code>bob</code> available within this block of specs.  You can expect it to be assigned a person, named &quot;Bob&quot;.</p>
<pre><code>subject(:bob) { Person.new(&quot;Bob&quot;) }
</code></pre><p> The code within the block is assigned to the dynamically created variable.  This variable is named after the symbol.  So, during these specs, the variable <code>bob</code> will hold a reference to the person under test.</p>
<hr>
<p>Let&apos;s review those results again (<code>$ rspec</code>).  See where they come from?  Now, let&apos;s review <code>describe</code>, <code>context</code>, <code>it</code>, &quot;expectations&quot;, and &quot;matchers&quot;, by changing our code and see the specs fail.  Take a few minutes to adjust the code and run the specs a few times.  Play with it.  See how your actions in the code AND in the specs affect the output.</p>
<p>Ok, let&apos;s change everything back.  Are we back to Green?  Good.</p>
<hr>
<h3 id="think-pair-share-support-another-language">Think, pair, share.  Support another language</h3>
<p>Let&apos;s take a few minutes to specify that a Person can greet in Spanish too. We&apos;ll stick to the specification for now, then add the implementation in a minute.</p>
<p>In spanish, we should greet with &quot;Hola me llamo Maria.&quot;  </p>
<hr>
<pre><code>context &quot;when language is &apos;Spanish&apos;&quot; do
  subject(:maria) { Person.new(&quot;Maria&quot;, &quot;Spanish&quot;) }

  it &quot;should offer a greeting in Spanish&quot; do
    expect(maria.greeting).to eql(&quot;Hola me llamo Maria.&quot;)
  end
end
</code></pre><hr>
<pre><code>when /spanish/i
  &quot;Hola me llamo #{name}.&quot;
</code></pre><hr>
<h3 id="think-pair-share-what-aren-t-we-testing">Think, pair, share.  What aren&apos;t we testing?</h3>
<p>Let&apos;s take a few minutes to think about what we aren&apos;t testing.</p>
<p>Sit quietly for 2 minutes.  Think like a tester.  What code exists that aren&apos;t testing.  What examples would be good to clarify what our code can do?</p>
<p>Next, we&apos;ll discuss with our pair for 4 minutes.
Then, we&apos;ll share a few examples with the class.</p>
<ul>
<li>That we are using the passed <code>name</code> argument.</li>
<li>What happens with an unsupported language</li>
</ul>
<hr>
<h3 id="exercise-implement-your-suggestions">Exercise: Implement your suggestions.</h3>
<ul>
<li>Specify that we utilize the passed name</li>
<li>Specify the response to an Unsupported language</li>
</ul>
<p>I recommend that you review the available Matchers in the <a href="https://www.relishapp.com/rspec/rspec-expectations/docs/built-in-matchers" target="_blank">RSpec documentation</a>.  These are live documents, written using &quot;relish&quot; to ensure they keep pace with the code.  Make sure you are on the version that corresponds to your installed library (3.3).</p>
<hr>
<h3 id="we-avoid-testing-implementation">We avoid testing implementation</h3>
<p>Here&apos;s something else we aren&apos;t testing.
We aren&apos;t testing that <code>greeting</code> uses a <code>select/case</code> statement.  That would be testing the internal implementation. Let&apos;s be clear, I should be free to write whatever code I want, inside of the <code>greeter</code> method, in order to achieve the results the specs indicate. Let&apos;s say our team creates a new translation library.  I should be able to swap out my naive implementation and replace it with that.  The following code tells the ItalianTranslator to translate this phrase from English.</p>
<pre><code>tony = Person.new(&quot;tony&quot;, ItalianTranslator)
</code></pre><p>I would replace the code in <code>greeting</code> with:</p>
<pre><code>def greeting
  phrase = &quot;Hello, my name is #{name}&quot;
  language.convert_from(phrase, :en)
end
</code></pre><hr>
<h3 id="exercise-add-farewell">Exercise: Add farewell.</h3>
<p>Add support for farewell, for each language.</p>
<hr>
<h2 id="mocks-stubs">Mocks &amp; Stubs</h2>
<p>Sometimes our Unit Under Test must interact with other object.  If these objects are difficult to setup or their response may be slow or non-deterministic -- like an external service that we contact via te internet.  It can make sense to mock out the other object, to create a &quot;fake&quot; object that supports the interface you need but returns a fixed, expected value.  This makes your component examples independent of other components.</p>
<ul>
<li>You can use mock objects the replace the entire object, just supporting the interface you need (the methods and attribute that your Unit Under Test actually interacts with).</li>
<li>You can stub specific methods on &quot;real&quot; objects to let them return whatever you like.</li>
</ul>
<hr>
<h2 id="example">Example</h2>
<pre><code class="lang-ruby">book = instance_double(<span class="hljs-string">&quot;Book&quot;</span>, <span class="hljs-symbol">:pages</span> =&gt; <span class="hljs-number">250</span>)
allow(book).to receive(<span class="hljs-symbol">:title</span>) { <span class="hljs-string">&quot;The RSpec Book&quot;</span> }
allow(book).to receive(<span class="hljs-symbol">:title</span>).and_return(<span class="hljs-string">&quot;The RSpec Book&quot;</span>)
</code></pre>
<hr>
<p>Now that you have had some small exercises to get familiar with the syntax, let&apos;s practice the concept.</p>
<p><a href="https://github.com/ga-dc/learn_ruby_via_rspec" target="_blank">https://github.com/ga-dc/learn_ruby_via_rspec</a></p>
<hr>
<h2 id="homework">Homework:</h2>
<p>Scoring a Scrabble game.
Break it into small pieces and have pairs iterate, then switch pairs and repeat.</p>
<p><a href="https://github.com/ga-dc/scrabbler" target="_blank">https://github.com/ga-dc/scrabbler</a></p>
<hr>
<h2 id="want-more-need-clarification">Want more? Need clarification?</h2>
<p>There are plenty of exercises in TestFrist.org</p>
<hr>
<h2 id="references">References:</h2>
<ul>
<li>&quot;The RSpec Book&quot;, David Chelimsky</li>
<li>Magic Tricks of Testing - Sandi Metz</li>
</ul>
<hr>
<h2 id="additional-resources">Additional Resources</h2>
<ul>
<li><p>RSpec Cheatsheets:</p>
<ul>
<li><a href="https://www.anchor.com.au/wp-content/uploads/rspec_cheatsheet_attributed.pdf" target="_blank">https://www.anchor.com.au/wp-content/uploads/rspec_cheatsheet_attributed.pdf</a></li>
<li><a href="https://gist.github.com/byplayer/965857" target="_blank">https://gist.github.com/byplayer/965857</a></li>
</ul>
</li>
<li><p>Code School RSpec:</p>
<ul>
<li><a href="https://www.codeschool.com/courses/testing-with-rspec" target="_blank">https://www.codeschool.com/courses/testing-with-rspec</a></li>
</ul>
</li>
<li><p>RSpec for Newbies:</p>
<ul>
<li><a href="http://code.tutsplus.com/tutorials/ruby-for-newbies-testing-with-rspec--net-21297" target="_blank">http://code.tutsplus.com/tutorials/ruby-for-newbies-testing-with-rspec--net-21297</a></li>
</ul>
</li>
<li><p>Mocks &amp; Stubs</p>
<ul>
<li><a href="http://rubydoc.info/gems/rspec-mocks/frames" target="_blank">http://rubydoc.info/gems/rspec-mocks/frames</a></li>
<li><a href="http://rubydoc.info/gems/rspec-mocks/frames" target="_blank">http://rubydoc.info/gems/rspec-mocks/frames</a></li>
</ul>
</li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../05-mvc-with-rails/readme.html" class="navigation navigation-prev " aria-label="Previous page: MVC with Rails"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../05-mvc-with-rails/MVC-intro-to-rails/readme.html" class="navigation navigation-next " aria-label="Next page: MVC Intro to Rails"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
